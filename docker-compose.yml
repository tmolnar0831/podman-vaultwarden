---
services:

    vaultwarden:
        networks:
            - n_vaultwarden
        container_name: vw_server
        volumes:
            - v_vaultwarden:/data/
        image: docker.io/vaultwarden/server:latest
        
    nginx:
        networks:
            - n_vaultwarden
        container_name: vw_proxy
        ports:
            - 4430:443
        volumes:
            - ./nginx-conf:/etc/nginx/conf.d
            - ./certs/cert.pem:/etc/nginx/cert.pem
            - ./certs/key.pem:/etc/nginx/key.pem
        depends_on:
            - vaultwarden
        image: docker.io/library/nginx

networks:
  n_vaultwarden:
    external:
      name: n_vaultwarden

volumes:
  v_vaultwarden:
    external:
      name: v_vaultwarden